(this["webpackJsonpauthenticate-me"]=this["webpackJsonpauthenticate-me"]||[]).push([[0],{29:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n.n(c),s=(n(29),n(13)),u=n.n(s),i=n(6),o=n(11),j=n(4),b=(n(37),a.a.createContext());function d(e){var t=e.children,n=Object(c.useRef)(),a=Object(c.useState)(),s=Object(j.a)(a,2),u=s[0],i=s[1];return Object(c.useEffect)((function(){i(n.current)}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.Provider,{value:u,children:t}),Object(r.jsx)("div",{ref:n})]})}function l(e){var t=e.onClose,n=e.children,a=Object(c.useContext)(b);return a?u.a.createPortal(Object(r.jsxs)("div",{id:"modal",children:[Object(r.jsx)("div",{id:"modal-background",onClick:t}),Object(r.jsx)("div",{id:"modal-content",children:n})]}),a):null}var O=n(3),f=n(9),h=n.n(f),p=n(12),x=n(25),v=n.n(x);function m(e){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(h.a.mark((function e(t){var n,r,c,a,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=s.length>1&&void 0!==s[1]?s[1]:{}).method=n.method||"GET",n.headers=n.headers||{},"GET"!==n.method.toUpperCase()&&(n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.headers["XSRF-Token"]=v.a.get("XSRF-TOKEN")),e.next=6,window.fetch(t,n);case 6:if(r=e.sent,!(c=r.headers.get("content-type"))||!c.includes("application/json")){e.next=13;break}return e.next=11,r.json();case 11:a=e.sent,r.data=a;case 13:if(!(r.status>=400)){e.next=15;break}throw r;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w="session/setUser",y="session/removeUser",S=function(e){return{type:w,payload:e}},C={user:null};var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object.assign({},e,{user:t.payload});case y:return Object.assign({},e,{user:null});default:return e}};n(39);var E=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.session.user})),n=Object(c.useState)(""),a=Object(j.a)(n,2),s=a[0],u=a[1],o=Object(c.useState)(""),b=Object(j.a)(o,2),d=b[0],l=b[1],f=Object(c.useState)(""),x=Object(j.a)(f,2),v=x[0],g=x[1],w=Object(c.useState)(""),y=Object(j.a)(w,2),C=y[0],k=y[1],E=Object(c.useState)([]),F=Object(j.a)(E,2),L=F[0],P=F[1];return t?Object(r.jsx)(O.a,{to:"/"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Sign Up"}),Object(r.jsxs)("form",{onSubmit:function(t){return t.preventDefault(),v===C?(P([]),e((n={email:s,username:d,password:v},function(){var e=Object(p.a)(h.a.mark((function e(t){var r,c,a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.username,c=n.email,a=n.password,e.next=3,m("/api/users",{method:"POST",body:JSON.stringify({username:r,email:c,password:a})});case 3:return s=e.sent,t(S(s.data.user)),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).catch((function(e){e.data&&e.data.errors&&P(e.data.errors)}))):P(["Confirm Password field must be the same as the Password field"]);var n},children:[Object(r.jsx)("ul",{children:L.map((function(e,t){return Object(r.jsx)("li",{children:e},t)}))}),Object(r.jsxs)("label",{children:["Email",Object(r.jsx)("input",{type:"text",value:s,onChange:function(e){return u(e.target.value)},required:!0})]}),Object(r.jsxs)("label",{children:["Username",Object(r.jsx)("input",{type:"text",value:d,onChange:function(e){return l(e.target.value)},required:!0})]}),Object(r.jsxs)("label",{children:["Password",Object(r.jsx)("input",{type:"password",value:v,onChange:function(e){return g(e.target.value)},required:!0})]}),Object(r.jsxs)("label",{children:["Confirm Password",Object(r.jsx)("input",{type:"password",value:C,onChange:function(e){return k(e.target.value)},required:!0})]}),Object(r.jsx)("button",{type:"submit",children:"Sign Up"})]})]})};var F=function(e){var t=e.user,n=Object(i.b)(),a=Object(c.useState)(!1),s=Object(j.a)(a,2),u=s[0],o=s[1];return Object(c.useEffect)((function(){if(u){var e=function(){o(!1)};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}}),[u]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:function(){u||o(!0)},children:Object(r.jsx)("i",{className:"fas fa-user-circle"})}),u&&Object(r.jsxs)("ul",{className:"profile-dropdown",children:[Object(r.jsx)("li",{children:t.username}),Object(r.jsx)("li",{children:t.email}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{onClick:function(e){e.preventDefault(),n(function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/api/session",{method:"DELETE"});case 2:return n=e.sent,t({type:y}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Log Out"})})]})]})};n(41);var L=function(){var e=Object(i.b)(),t=Object(c.useState)(""),n=Object(j.a)(t,2),a=n[0],s=n[1],u=Object(c.useState)(""),o=Object(j.a)(u,2),b=o[0],d=o[1],l=Object(c.useState)([]),O=Object(j.a)(l,2),f=O[0],x=O[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Log In"}),Object(r.jsxs)("form",{onSubmit:function(t){return t.preventDefault(),x([]),e(function(e){var t=e.credential,n=e.password;return function(){var e=Object(p.a)(h.a.mark((function e(r){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/api/session",{method:"POST",body:JSON.stringify({credential:t,password:n})});case 2:return c=e.sent,r(S(c.data.user)),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({credential:a,password:b})).catch((function(e){e.data&&e.data.errors&&x(e.data.errors)}))},children:[Object(r.jsx)("ul",{children:f.map((function(e,t){return Object(r.jsx)("li",{children:e},t)}))}),Object(r.jsxs)("label",{children:["Username or Email",Object(r.jsx)("input",{type:"text",value:a,onChange:function(e){return s(e.target.value)},required:!0})]}),Object(r.jsxs)("label",{children:["Password",Object(r.jsx)("input",{type:"password",value:b,onChange:function(e){return d(e.target.value)},required:!0})]}),Object(r.jsx)("button",{type:"submit",children:"Log In"})]})]})};var P=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:function(){return a(!0)},children:"Log In"}),n&&Object(r.jsx)(l,{onClose:function(){return a(!1)},children:Object(r.jsx)(L,{})})]})};n(42);var T=function(e){var t,n=e.isLoaded,c=Object(i.c)((function(e){return e.session.user}));return t=c?Object(r.jsx)(F,{user:c}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(P,{}),Object(r.jsx)(o.b,{to:"/signup",children:"Sign Up"})]}),Object(r.jsx)("ul",{children:Object(r.jsxs)("li",{children:[Object(r.jsx)(o.b,{exact:!0,to:"/",children:"Home"}),n&&t]})})};var U,q=function(){var e=Object(i.b)(),t=Object(c.useState)(!1),n=Object(j.a)(t,2),a=n[0],s=n[1];return Object(c.useEffect)((function(){e(function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/api/session");case 2:return n=e.sent,t(S(n.data.user)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){return s(!0)}))}),[e]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(T,{isLoaded:a}),a&&Object(r.jsx)(O.d,{children:Object(r.jsx)(O.b,{path:"/signup",children:Object(r.jsx)(E,{})})})]})},N=n(15),D=n(26),I=Object(N.c)({session:k});U=Object(N.a)(D.a);var J=function(e){return Object(N.d)(I,e,U)}();function R(){return Object(r.jsx)(d,{children:Object(r.jsx)(i.a,{store:J,children:Object(r.jsx)(o.a,{children:Object(r.jsx)(q,{})})})})}u.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(R,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.f41f6768.chunk.js.map